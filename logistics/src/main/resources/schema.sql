DROP TABLE IF EXISTS RESOURCE;
DROP TABLE IF EXISTS STORAGE;
DROP TABLE IF EXISTS PRODUCT;
CREATE TABLE IF NOT EXISTS RESOURCE (
  ID_RESOURCE INT GENERATED BY DEFAULT AS IDENTITY,
  ID_PRODUCT INT NOT NULL,
  ID_STORAGE INT NOT NULL,
  QUANTITY INT NOT NULL,
  PRIMARY KEY (ID_RESOURCE)
);
CREATE TABLE IF NOT EXISTS STORAGE (
  ID_STORAGE INT GENERATED BY DEFAULT AS IDENTITY,
  TYPE VARCHAR(16) NOT NULL,
  CAPACITY INT NOT NULL,
  AMOUNT INT NOT NULL,
  PRIMARY KEY (ID_STORAGE)
);
CREATE TABLE IF NOT EXISTS PRODUCT (
  ID_PRODUCT INT GENERATED BY DEFAULT AS IDENTITY,
  NAME VARCHAR(128) NOT NULL,
  PRODUCER VARCHAR(64) NOT NULL,
  OUTSIDE_ID VARCHAR(32) NOT NULL,
  DESCRIPTION VARCHAR(256) NOT NULL,
  PRICE FLOAT NOT NULL,
  UNIT VARCHAR(32) NOT NULL,
  TYPE VARCHAR(16) NOT NULL,
  PRIMARY KEY (ID_PRODUCT)
);
ALTER TABLE RESOURCE
ADD CONSTRAINT FK_PRODUCT FOREIGN KEY (ID_PRODUCT) REFERENCES PRODUCT (ID_PRODUCT);
ALTER TABLE RESOURCE
ADD CONSTRAINT FK_STORAGE FOREIGN KEY (ID_STORAGE) REFERENCES STORAGE (ID_STORAGE);